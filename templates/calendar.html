<!DOCTYPE html>
<title>{{@appname}} :: About Echo</title>
<link rel="stylesheet" href="{{@baseurl}}/css/fullcalendar.css" type="text/css">
<script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="{{@baseurl}}/js/jquery-ui-1.10.2.custom.min.js"></script>
<script src="{{@baseurl}}/js/fullcalendar.min.js"></script>

<script>
$(document).ready(function() {
	$('#calendar').fullCalendar({
		header: {
			left: '',
			center: 'title',
			right: 'prev,next today',
		},
		timeFormat: 'h(:mm)tt',

		events: '{{@baseurl}}/json',
		allDayDefault: false,
		weekMode: "liquid",
		eventBackgroundColor: "transparent",
		eventBorderColor: "transparent",
		eventTextColor: "green",

		eventClick: function(event, jsevent, view) {
			$("#eventinfo div").load("{{@baseurl}}/event/" + event.id + " #container",
					function() {
						var info = $("#eventinfo");
						info.css('top', jsevent.pageY + "px");
						info.css('left', jsevent.pageX + "px");

						/* Don't overflow the page */
						if (jsevent.pageX + info.outerWidth() > $(window).width())
							info.css('left', $(window).width() - info.outerWidth() - 10);

						info.show();
					});

			return false;
		},
	});

	$('.fc-header-left').html('<img src="{{@baseurl}}/img/miniecho.png" height=30 title="Powered by Echo Manchester"> <a class="add" href="{{@baseurl}}/event/add" target="_parent">+ add an event</a>');

	$("#close").click(function() {
		$("#eventinfo").hide();
	});
});
</script>

<style>
* { font-family: Helvetica; }
body { font-size: 14px; }
h2 { font-size: 1.2rem; margin: 0; margin-top: 5px !important; }
.fc-grid th { text-align: left; padding-left: 2px; }
.fc-header-left { vertical-align: bottom; }
.add { display: inline-block; vertical-align: top; font-size: 1.2rem; text-decoration: none; color: blue; padding-left: 20px; margin-top: 5px; }
.add:hover { text-decoration: underline; }

#eventinfo { position: absolute; background-color: white; width: 380px; padding: 10px; box-shadow:; 5px 5px 5px #aaa; display: none; border: 2px solid; z-index: 99; }
#eventinfo #close { float: right; padding: 0 2px; border-radius: 2px; border: 1px solid #aaa; }
#eventinfo #close:hover { background-color: #eee; cursor: pointer; }
</style>

<div id="calendar" style="background:white;"></div>

<div id="eventinfo">
<span id="close">x</span>
<div></div>
</div>
