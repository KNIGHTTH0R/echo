CREATE TABLE events
(
	id INT PRIMARY KEY,

	title TEXT,
	date DATETIME,
	location TEXT,
	blurb TEXT,
	facebook_id INT,
	url TEXT,

	/* XXX add something like film/meeting/etc. to allow filters)

	/* maint stuff */
	email TEXT,
	approved TEXT /* when this is a string, it's not approved */
);

CREATE TABLE users
(
	email TEXT PRIMARY KEY,
	banned BOOLEAN
);

INSERT INTO events ( title, date, location, blurb, email )
	VALUES ( "Thing", datetime('now', 'start of day', '+21 hours'), "Wahlbar",
	"A thing, hay!", "takkaria@gmail.com");

-- 

CREATE TABLE posts (
	id TEXT PRIMARY KEY,
	title TEXT,
	link TEXT,
	date DATETIME,
	summary TEXT,
	image TEXT,	 /* this is an URL... maybe make it a data: link? */
	feed_url TEXT
);

CREATE TABLE feeds (
	feed_url TEXT PRIMARY KEY,
	site_url TEXT,
	title TEXT
);

CREATE VIEW post_info AS SELECT * FROM posts LEFT OUTER JOIN feeds ON posts.feed_url = feeds.feed_url;

INSERT INTO feeds ( feed_url, site_url, title) VALUES (
"http://insidethem60.journallocal.co.uk/feed/",
"http://insidethem60.journallocal.co.uk/",
"Inside the M60" );
